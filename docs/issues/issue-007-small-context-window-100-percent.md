# [低] 小窗口模型上下文占用显示为 100%

## 概要
当 `contextWindow <= BASELINE_TOKENS` 时直接返回 0 剩余，最终显示 100% 使用率，可能对 8K/10K 模型误报。

## 影响
- 上下文使用率显示不准确。
- 用户对风险判断被误导。

## 位置
- `src/index.ts:61`

## 复现步骤
1. 使用小窗口模型（<= 12k context）。
2. 观察 HUD 中上下文百分比显示。

## 预期结果
按真实窗口计算使用率。

## 实际结果
几乎恒定显示 100%。

## 修复建议
- 基线 token 应取 `min(contextWindow, BASELINE_TOKENS)`。
- 或对小窗口模型直接用原始 `total/contextWindow` 计算。

## 修复记录
- 状态：已修复
- 修复人：codex
- 修复时间：2026-01-29
- 变更说明：小窗口模型改为按真实窗口比例计算剩余百分比。
- 验证方式：未执行；建议使用 8k/10k 模型观察占用百分比。
