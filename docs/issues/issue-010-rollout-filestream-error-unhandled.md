# [中] rollout 读取流错误未处理导致进程崩溃

## 概要
`parseRolloutFile` 仅监听 `readline` 的 `error`，未监听底层 `fileStream` 的 `error` 事件。文件被删除、权限变化或 I/O 异常时可能触发未处理异常导致进程退出。

## 影响
- HUD 进程可能因未处理异常退出。
- 活动会话期间稳定性下降。

## 位置
- `src/collectors/rollout.ts:133`

## 复现步骤
1. 正在读取 rollout 文件时删除或移动该文件。
2. 观察进程是否因 `error` 事件未处理而退出。

## 预期结果
读取错误被捕获并降级处理，不影响主进程运行。

## 实际结果
可能触发未处理异常导致进程崩溃。

## 修复建议
- 为 `fileStream` 添加 `error` 监听，必要时 `resolve` 返回当前已读取状态。
- 与 `rl.on('error')` 一致的降级策略。

## 修复记录
- 状态：已修复
- 修复人：codex
- 修复时间：2026-01-30
- 变更说明：为 fileStream 增加 error 监听并统一收敛为安全 resolve，避免未处理异常导致进程退出。
- 验证方式：未执行；建议读取中删除/移动文件验证进程不崩溃。
